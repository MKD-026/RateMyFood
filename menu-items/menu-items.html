<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing main page</title>
    <link rel="stylesheet" href="menu-items.css">
    <link rel="stylesheet" href="dark-theme-menu-items.css" id="theme-style">
</head>
<body>

    <header>
        <ion-icon class="logo-icon" name="fast-food"></ion-icon>
    
        <h6 class="logo">Hello User!</h6>
        <nav class="navigation">
            <button class="btnlogin-popup" onclick="toggleTheme()">
                <div class="mode">
                    <ion-icon name="contrast-outline"></ion-icon>
                </div>
            </button>
            
            <button class="btnlogin-popup">
                <ion-icon class="settings" name="cog-outline"></ion-icon>
            </button>
            
        </nav>
    </header>

    <div class="container">
        <!-- This div class contains information about the food menu -->
        <div class="info">
            <div class="food-pic">
                <!-- This is the image of the meal or left side -->
                <div class="image">
                    <img id="meal-image" src="" alt="">
                </div>
                
            </div>


            <!-- This is the right side  -->
            <div class="menu-items">
                <h1>Menu items</h1>
                <div class="menu-item">
                    <h3>Rice</h3>
                    <div class="rating">
                        <ion-icon name="star" class="star" data-rating="1"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="2"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="3"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="4"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="5"></ion-icon>
                    </div>
                </div>
            
                <div class="menu-item">
                    <h3>Rice</h3>
                    <div class="rating">
                        <ion-icon name="star" class="star" data-rating="1"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="2"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="3"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="4"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="5"></ion-icon>
                    </div>
                </div>

                <div class="menu-item">
                    <h3>Rice</h3>
                    <div class="rating">
                        <ion-icon name="star" class="star" data-rating="1"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="2"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="3"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="4"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="5"></ion-icon>
                    </div>
                </div>

                <div class="menu-item">
                    <h3>Rice</h3>
                    <div class="rating">
                        <ion-icon name="star" class="star" data-rating="1"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="2"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="3"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="4"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="5"></ion-icon>
                    </div>
                </div>

                <div class="menu-item">
                    <h3>Rice</h3>
                    <div class="rating">
                        <ion-icon name="star" class="star" data-rating="1"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="2"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="3"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="4"></ion-icon>
                        <ion-icon name="star" class="star" data-rating="5"></ion-icon>
                    </div>
                </div>
            
            </div>
        </div>




        <!-- This div class is for commenting on the food and viewning the comments -->
        <div class="comments">
            <div class="view-comments">
                <div class="vcomments-box">
                    <h1> Comments: </h1>
                    <h3>The food was delicious... </h3>
                </div>
            </div>

            <div class="write-comments">
                <div class="comment-text">
                    <h2> Write a comment: </h2>
                </div>
                <div class="wcomments-box">
                    <input type="text" id="comment-input">
                    <button id="submit-comment">Submit</button>
                  </div>
                </div>
            </div>
        </div>
    </div> 

    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            const urlParams = new URLSearchParams(window.location.search);
            const meal = urlParams.get('meal');
            const imageElement = document.getElementById('meal-image');
            
            // Check the meal value and set the image source accordingly
            if (meal === 'breakfast') {
                imageElement.src = '../Resources/breakfast.jpeg';
            } else if (meal === 'lunch') {
                imageElement.src = '../Resources/lunch.jpeg';
            } else if (meal === 'snacks') {
                imageElement.src = '../Resources/snacks.jpeg';
            } else if (meal === 'dinner') {
                imageElement.src = '../Resources/dinner.jpeg';
            }

            // Add event listeners to the star icons
            const stars = document.querySelectorAll('.star');
            stars.forEach((star) => {
                star.addEventListener('click', (event) => {
                    const rating = event.target.dataset.rating;
                    const menu = event.target.dataset.menu;
                    console.log(`User rated ${menu} with ${rating} stars.`);

                    // Update the star colors based on the rating
                    const clickedRating = parseInt(rating);
                    const menuStars = document.querySelectorAll(`.star[data-menu="${menu}"]`);
                    menuStars.forEach((star) => {
                        const starRating = parseInt(star.dataset.rating);
                        if (starRating <= clickedRating) {
                            star.style.color = 'yellow';
                        } else {
                            star.style.color = 'white';
                        }
                    });
                });
            });
        });
    </script>

    <script>
        function toggleTheme() {
            const themeLink = document.getElementById("theme-style");
            const currentTheme = themeLink.getAttribute("href");

            // Check the current theme and toggle between light and dark themes
            if (currentTheme === "menu-items.css") {
                themeLink.setAttribute("href", "dark-theme-menu-items.css");
            } else {
                themeLink.setAttribute("href", "menu-items.css");
            }
        }
    </script>  
      
    <script src="menu-items.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script> 
</body>
</html>
